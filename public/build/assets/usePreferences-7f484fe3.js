import{b as i,P as I}from"./app-0842237d.js";function C(e,a="use-local-storage"){try{return JSON.stringify(e)}catch{throw new Error(`@mantine/hooks ${a}: Failed to serialize the value`)}}function k(e){try{return e&&JSON.parse(e)}catch{return e}}function F(e){return{getItem:r=>{try{return window[e].getItem(r)}catch{return console.warn("use-local-storage: Failed to get value from storage, localStorage is blocked"),null}},setItem:(r,l)=>{try{window[e].setItem(r,l)}catch{console.warn("use-local-storage: Failed to set value to storage, localStorage is blocked")}},removeItem:r=>{try{window[e].removeItem(r)}catch{console.warn("use-local-storage: Failed to remove value from storage, localStorage is blocked")}}}}function N(e,a){const s=e==="localStorage"?"mantine-local-storage":"mantine-session-storage",{getItem:f,setItem:r,removeItem:l}=F(e);return function({key:o,defaultValue:n,getInitialValueInEffect:E=!0,deserialize:v=k,serialize:S=g=>C(g,a)}){const g=i.useCallback(t=>{let c;try{c=typeof window>"u"||!(e in window)||window[e]===null||!!t}catch{c=!0}if(c)return n;const u=f(o);return u!==null?v(u):n},[o,n]),[w,d]=i.useState(g(E)),m=i.useCallback(t=>{t instanceof Function?d(c=>{const u=t(c);return r(o,S(u)),window.dispatchEvent(new CustomEvent(s,{detail:{key:o,value:t(c)}})),u}):(r(o,S(t)),window.dispatchEvent(new CustomEvent(s,{detail:{key:o,value:t}})),d(t))},[o]),b=i.useCallback(()=>{l(o),window.dispatchEvent(new CustomEvent(s,{detail:{key:o,value:n}}))},[]);return I("storage",t=>{t.storageArea===window[e]&&t.key===o&&d(v(t.newValue??void 0))}),I(s,t=>{t.detail.key===o&&d(t.detail.value)}),i.useEffect(()=>{n!==void 0&&w===void 0&&m(n)},[n,w,m]),i.useEffect(()=>{m(g())},[]),[w===void 0?n:w,m,b]}}function O(e){return N("localStorage","use-local-storage")(e)}function V(){const[e,a]=O({key:"tasks-view",defaultValue:"list",getInitialValueInEffect:!1});return{tasksView:e,setTasksView:a}}export{V as u};
