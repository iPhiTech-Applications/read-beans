import{f as Je,e as Qe,m as Re,n as Xe,h as Ye,R as o,b as Ze}from"./app-374f8179.js";import{u as et}from"./use-resolved-styles-api-9ab1b421.js";import{i as tt,g as ot,a as st,O as nt}from"./OptionsDropdown-a64bbc14.js";import{u as lt,C as u}from"./Combobox-a1cc1704.js";import{I as rt}from"./InputBase-229a26b3.js";import{P as q}from"./Pill-9cb7cf61.js";import{P as H}from"./PillsInput-69abf6c0.js";import{u as K}from"./use-uncontrolled-c541d6c8.js";function at({data:y,value:w}){const a=w.map(i=>i.trim().toLowerCase());return y.reduce((i,c)=>(tt(c)?i.push({group:c.group,items:c.items.filter(f=>a.indexOf(f.value.toLowerCase().trim())===-1)}):a.indexOf(c.value.toLowerCase().trim())===-1&&i.push(c),i),[])}const it={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},U=Je((y,w)=>{const a=Qe("MultiSelect",it,y),{classNames:O,className:i,style:c,styles:f,unstyled:r,vars:ct,size:g,value:J,defaultValue:Q,onChange:R,onKeyDown:b,variant:X,data:Y,dropdownOpened:Z,defaultDropdownOpened:ee,onDropdownOpen:te,onDropdownClose:v,selectFirstOptionOnChange:E,onOptionSubmit:C,comboboxProps:oe,filter:se,limit:ne,withScrollArea:le,maxDropdownHeight:re,searchValue:ae,defaultSearchValue:ie,onSearchChange:ce,readOnly:h,disabled:p,onFocus:D,onBlur:x,onPaste:pt,radius:pe,rightSection:de,rightSectionWidth:ue,rightSectionPointerEvents:B,rightSectionProps:he,leftSection:me,leftSectionWidth:fe,leftSectionPointerEvents:ge,leftSectionProps:Se,inputContainer:Pe,inputWrapperOrder:ye,withAsterisk:we,labelProps:Oe,descriptionProps:be,errorProps:ve,wrapperProps:Ee,description:Ce,label:De,error:L,maxValues:xe,searchable:n,nothingFoundMessage:N,withCheckIcon:Ie,checkIconPosition:Ve,hidePickedOptions:A,withErrorStyles:ke,name:_e,form:Me,id:Fe,clearable:Be,clearButtonProps:Le,hiddenInputProps:Ne,placeholder:W,hiddenInputValuesDivider:Ae,required:We,mod:Te,renderOption:$e,onRemove:l,onClear:I,...ze}=a,V=Re(Fe),k=ot(Y),d=st(k),s=lt({opened:Z,defaultOpened:ee,onDropdownOpen:te,onDropdownClose:()=>{v==null||v(),s.resetSelectedOption()}}),{styleProps:Ge,rest:{type:dt,autoComplete:je,...qe}}=Xe(ze),[t,m]=K({value:J,defaultValue:Q,finalValue:[],onChange:R}),[S,P]=K({value:ae,defaultValue:ie,finalValue:"",onChange:ce}),_=Ye({name:"MultiSelect",classes:{},props:a,classNames:O,styles:f,unstyled:r}),{resolvedClassNames:T,resolvedStyles:$}=et({props:a,styles:f,classNames:O}),He=e=>{b==null||b(e),e.key===" "&&!n&&(e.preventDefault(),s.toggleDropdown()),e.key==="Backspace"&&S.length===0&&t.length>0&&(l==null||l(t[t.length-1]),m(t.slice(0,t.length-1)))},Ke=t.map((e,F)=>{var G,j;return o.createElement(q,{key:`${e}-${F}`,withRemoveButton:!h&&!((G=d[e])!=null&&G.disabled),onRemove:()=>{m(t.filter(Ue=>e!==Ue)),l==null||l(e)},unstyled:r,..._("pill")},((j=d[e])==null?void 0:j.label)||e)});Ze.useEffect(()=>{E&&s.selectFirstOption()},[E,t]);const M=Be&&t.length>0&&!p&&!h&&o.createElement(u.ClearButton,{size:g,...Le,onClear:()=>{I==null||I(),m([]),P("")}}),z=at({data:k,value:t});return o.createElement(o.Fragment,null,o.createElement(u,{store:s,classNames:T,styles:$,unstyled:r,size:g,readOnly:h,__staticSelector:"MultiSelect",onOptionSubmit:e=>{C==null||C(e),P(""),s.updateSelectedOptionIndex("selected"),t.includes(d[e].value)?(m(t.filter(F=>F!==d[e].value)),l==null||l(d[e].value)):t.length<xe&&m([...t,d[e].value])},...oe},o.createElement(u.DropdownTarget,null,o.createElement(H,{...Ge,__staticSelector:"MultiSelect",classNames:T,styles:$,unstyled:r,size:g,className:i,style:c,variant:X,disabled:p,radius:pe,rightSection:de||M||o.createElement(u.Chevron,{size:g,error:L,unstyled:r}),rightSectionPointerEvents:B||(M?"all":"none"),rightSectionWidth:ue,rightSectionProps:he,leftSection:me,leftSectionWidth:fe,leftSectionPointerEvents:ge,leftSectionProps:Se,inputContainer:Pe,inputWrapperOrder:ye,withAsterisk:we,labelProps:Oe,descriptionProps:be,errorProps:ve,wrapperProps:Ee,description:Ce,label:De,error:L,multiline:!0,withErrorStyles:ke,__stylesApiProps:{...a,rightSectionPointerEvents:B||(M?"all":"none"),multiline:!0},pointer:!n,onClick:()=>n?s.openDropdown():s.toggleDropdown(),"data-expanded":s.dropdownOpened||void 0,id:V,required:We,mod:Te},o.createElement(q.Group,{disabled:p,unstyled:r,..._("pillsList")},Ke,o.createElement(u.EventsTarget,{autoComplete:je},o.createElement(H.Field,{...qe,ref:w,id:V,placeholder:W,type:!n&&!W?"hidden":"visible",..._("inputField"),unstyled:r,onFocus:e=>{D==null||D(e),n&&s.openDropdown()},onBlur:e=>{x==null||x(e),s.closeDropdown(),P("")},onKeyDown:He,value:S,onChange:e=>{P(e.currentTarget.value),n&&s.openDropdown(),E&&s.selectFirstOption()},disabled:p,readOnly:h||!n,pointer:!n}))))),o.createElement(nt,{data:A?z:k,hidden:h||p,filter:se,search:S,limit:ne,hiddenWhenEmpty:!n||!N||A&&z.length===0&&S.trim().length===0,withScrollArea:le,maxDropdownHeight:re,filterOptions:n,value:t,checkIconPosition:Ve,withCheckIcon:Ie,nothingFoundMessage:N,unstyled:r,labelId:`${V}-label`,renderOption:$e})),o.createElement("input",{type:"hidden",name:_e,value:t.join(Ae),form:Me,disabled:p,...Ne}))});U.classes={...rt.classes,...u.classes};U.displayName="@mantine/core/MultiSelect";export{U as M};
