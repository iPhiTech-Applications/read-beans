import{q as C,b as f,j as r,a as I}from"./app-0842237d.js";import{E as D,A as E}from"./ArchivedItems-6908c606.js";import{u as G,F}from"./Filters-cf92d908.js";import{u as y}from"./useTaskFiltersStore-d5781a7a.js";import{u as S}from"./useTasksStore-2673510b.js";import{u as P}from"./usePreferences-7f484fe3.js";import{a as z}from"./useWebSockets-33e5047c.js";import{M as A}from"./MainLayout-b9e5f435.js";import{D as M,C as N}from"./dnd.esm-a546e2a9.js";import{CreateTaskDrawer as R}from"./CreateTaskDrawer-a9ab721f.js";import{EditTaskDrawer as _}from"./EditTaskDrawer-7a81ab81.js";import W from"./FiltersDrawer-1fe2712b.js";import $ from"./Header-06b412bc.js";import q from"./CreateTasksGroupModal-e4c40c9c.js";import B from"./TaskGroup-33092311.js";import{G as s}from"./Grid-e548b273.js";import{I as H}from"./IconPlus-5c519c74.js";import"./use-computed-color-scheme-7794acad.js";import"./Flex-3eec32a1.js";import"./Title-a0ed43dd.js";import"./Text-0f25386e.js";import"./ArchivedTask-b5f0ef28.js";import"./Label-91d5cf89.js";import"./ColorSwatch-3b36ccc9.js";import"./task-fdcc1607.js";import"./user-6639b4f0.js";import"./TaskRow.module-427abc78.js";import"./TaskActions-1b437979.js";import"./ConfirmModal-674b71fb.js";import"./index-51272854.js";import"./Menu-f81784eb.js";import"./use-resolved-styles-api-6cf44df2.js";import"./Popover-f8e352cc.js";import"./DirectionProvider-8ec7ed91.js";import"./use-floating-auto-update-f3813b40.js";import"./use-uncontrolled-8c49da27.js";import"./ActionIcon-f908f42d.js";import"./IconDots-a935851c.js";import"./createReactComponent-c737850d.js";import"./IconArchive-d0ae841f.js";import"./Checkbox-9fb90898.js";import"./get-auto-contrast-value-58024fc4.js";import"./Input-da77b9d4.js";import"./create-optional-context-731c9784.js";import"./CheckIcon-5dce244a.js";import"./Tooltip-0fe109d8.js";import"./get-style-object-71cabcb5.js";import"./Pill-0610b8f5.js";import"./ArchivedTaskGroup-0a7e6096.js";import"./TaskGroupActions-35f5edeb.js";import"./EditTasksGroupModal-e0f9d495.js";import"./useForm-bb658ce6.js";import"./TextInput-b20d0eac.js";import"./InputBase-60d93754.js";import"./IconPencil-19c34536.js";import"./TaskGroup.module-8bfe796a.js";import"./reorder-c78854a4.js";import"./_baseClone-98204728.js";import"./index-791a8db4.js";import"./FilterButton-c06f7bfe.js";import"./IconCheck-c8919a1d.js";import"./Stack-1638e70e.js";import"./route-426ef2aa.js";import"./FlashNotification-80b15f0d.js";import"./use-disclosure-eb93ce5d.js";import"./IconInfoCircle-c4cbed09.js";import"./IconCircleX-2c153941.js";import"./Container-ff5d0a99.js";import"./Image-e655e620.js";import"./Avatar-5e3d7158.js";import"./upper-first-a5ff10ec.js";import"./IconLayoutList-b2e899c7.js";import"./IconUsers-8fe5a950.js";import"./ScrollArea-6eaed29f.js";import"./EmptyWithIcon-33d678f1.js";import"./datetime-a8debb17.js";import"./IconMessage-fdf47061.js";import"./Center-ca7815fd.js";import"./get-sorted-breakpoints-cdc16153.js";import"./TaskDrawer.module-dc04c942.js";import"./file-a40a15db.js";import"./IconX-fad75c2c.js";import"./SimpleGrid-3437cfdc.js";import"./get-base-value-ad2e8cbc.js";import"./pick-calendar-levels-props-956c10da.js";import"./AccordionChevron-dfcd26d9.js";import"./clamp-73f6bef2.js";import"./RichTextEditor-88e8e1be.js";import"./ColorPicker-c2794357.js";import"./useTaskDrawerStore-51b49aee.js";import"./LabelsDropdown-856ebec9.js";import"./Combobox-1fa9834a.js";import"./PillsInput-ce9d654a.js";import"./Drawer-a9a6eb8b.js";import"./MultiSelect-b18d0e84.js";import"./OptionsDropdown-11d3e2a8.js";import"./Select-fffeb4d7.js";import"./NumberInput-e5c7b4b0.js";import"./Comments-770179fa.js";import"./Timer-0dfe95cf.js";import"./Divider-a16aed59.js";import"./Breadcrumbs-b9528ea9.js";import"./SearchInput-4f986030.js";import"./IconSearch-646771d6.js";import"./Task-3a4f232e.js";import"./TaskCard-b379c8fa.js";import"./TaskRow-6056bbb7.js";const L="_viewport_1wdua_2",U={viewport:L};let e=null;const V=()=>{const{project:i,taskGroups:n,groupedTasks:c,openedTask:d}=C().props;e=i;const{groups:a,setGroups:x,reorderGroup:k}=G(),{tasks:l,setTasks:j,addTask:h,reorderTask:g,moveTask:T}=S(),{hasUrlParams:b}=y(),{initProjectWebSocket:v}=z(),{tasksView:p}=P(),u=b();f.useEffect(()=>{x(n),j(c),d&&h(d)},[n,c]),f.useEffect(()=>v(i),[]);const w=({source:o,destination:t})=>{t&&(o.droppableId.includes("tasks")&&t.droppableId.includes("tasks")?o.droppableId===t.droppableId?g(o,t):T(o,t):k(o.index,t.index))};return r.jsxs(r.Fragment,{children:[r.jsx($,{}),can("create task")&&r.jsx(R,{}),r.jsx(_,{}),r.jsxs(s,{columns:12,gutter:50,mt:"xl",className:`${p}-view`,children:[route().params.archived?r.jsx(s.Col,{span:"auto",children:r.jsx(E,{groups:a,tasks:l})}):r.jsx(s.Col,{span:"auto",children:a.length?r.jsx(r.Fragment,{children:r.jsx(M,{onDragEnd:w,children:r.jsx(N,{droppableId:"groups",direction:p==="list"?"vertical":"horizontal",type:"group",children:o=>r.jsx("div",{...o.droppableProps,ref:o.innerRef,children:r.jsxs("div",{className:U.viewport,children:[a.filter(t=>{var m;return!u||u&&((m=l[t.id])==null?void 0:m.length)>0}).map((t,m)=>r.jsx(B,{index:m,group:t,tasks:l[t.id]||[]},t.id)),o.placeholder,!route().params.archived&&can("create task group")&&r.jsxs(I,{leftSection:r.jsx(H,{size:14}),variant:"transparent",size:"sm",mt:14,m:4,radius:"xl",onClick:q,style:{width:"200px"},children:["Add ",p==="list"?"tasks group":"group"]})]})})})})}):r.jsx(D,{title:"No tasks found",subtitle:"or none match your search criteria"})}),p==="list"?r.jsx(s.Col,{span:3,children:r.jsx(F,{})}):r.jsx(W,{})]})]})};V.layout=i=>r.jsx(A,{title:e==null?void 0:e.name,children:i});export{V as default};
