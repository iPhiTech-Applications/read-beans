import{q as C,b as f,j as r,a as I}from"./app-374f8179.js";import{E as D,A as E}from"./ArchivedItems-6f2a1765.js";import{u as G,F}from"./Filters-1398a4a8.js";import{u as y}from"./useTaskFiltersStore-acee5f35.js";import{u as S}from"./useTasksStore-623ae120.js";import{u as P}from"./usePreferences-bbc9428d.js";import{a as z}from"./useWebSockets-9a8c1354.js";import{M as A}from"./MainLayout-0488b167.js";import{D as M,C as N}from"./dnd.esm-97fb9e0d.js";import{CreateTaskDrawer as R}from"./CreateTaskDrawer-92f2f29f.js";import{EditTaskDrawer as _}from"./EditTaskDrawer-86aa0994.js";import W from"./FiltersDrawer-b1b76631.js";import $ from"./Header-6dbefd46.js";import q from"./CreateTasksGroupModal-a8f401f4.js";import B from"./TaskGroup-cb9501fa.js";import{G as s}from"./Grid-5d8534e5.js";import{I as H}from"./IconPlus-ef57db88.js";import"./use-computed-color-scheme-87717321.js";import"./Flex-25d97275.js";import"./Title-8e6f5e48.js";import"./Text-54f93905.js";import"./ArchivedTask-dfcd649a.js";import"./Label-566a57b0.js";import"./ColorSwatch-22e4c3d2.js";import"./task-8c247610.js";import"./user-6639b4f0.js";import"./TaskRow.module-427abc78.js";import"./TaskActions-bc3b9f75.js";import"./ConfirmModal-37455e94.js";import"./index-1f185179.js";import"./Menu-a0964952.js";import"./use-resolved-styles-api-9ab1b421.js";import"./Popover-3f93f166.js";import"./DirectionProvider-7f2be802.js";import"./use-floating-auto-update-94ecc69c.js";import"./use-uncontrolled-c541d6c8.js";import"./ActionIcon-6bed75e6.js";import"./IconDots-1660ad36.js";import"./createReactComponent-8eeb0f88.js";import"./IconArchive-9b9931d8.js";import"./Checkbox-f4a1160f.js";import"./get-auto-contrast-value-58024fc4.js";import"./Input-cbe427a8.js";import"./create-optional-context-a355ac42.js";import"./CheckIcon-36b72f38.js";import"./Tooltip-0b66e8a5.js";import"./get-style-object-71cabcb5.js";import"./Pill-9cb7cf61.js";import"./ArchivedTaskGroup-d28c80bd.js";import"./TaskGroupActions-dde8e01d.js";import"./EditTasksGroupModal-4c8c4061.js";import"./useForm-026f8df8.js";import"./TextInput-b134a2d1.js";import"./InputBase-229a26b3.js";import"./IconPencil-71dcb0ee.js";import"./TaskGroup.module-8bfe796a.js";import"./reorder-1fd24999.js";import"./_baseClone-e732cfdc.js";import"./index-4597ff56.js";import"./FilterButton-dd547abe.js";import"./IconCheck-31d91c2c.js";import"./Stack-df36a12b.js";import"./route-564d43e0.js";import"./FlashNotification-c0c57b3f.js";import"./use-disclosure-dc5fd7a6.js";import"./IconInfoCircle-ba104c62.js";import"./IconCircleX-9c124521.js";import"./Container-5fe452f5.js";import"./Image-7c728a9b.js";import"./Avatar-2c990df2.js";import"./upper-first-a5ff10ec.js";import"./IconLayoutList-50bd83d5.js";import"./IconUsers-7ba2e0c4.js";import"./ScrollArea-9a506a5f.js";import"./EmptyWithIcon-8d418a7d.js";import"./datetime-a3ed528b.js";import"./IconMessage-78bbe09b.js";import"./Center-d0de108e.js";import"./get-sorted-breakpoints-ad688b72.js";import"./TaskDrawer.module-55c878ab.js";import"./file-a40a15db.js";import"./IconX-826d5dc3.js";import"./SimpleGrid-f38e303a.js";import"./get-base-value-ad2e8cbc.js";import"./pick-calendar-levels-props-882ad1c7.js";import"./AccordionChevron-06419bcc.js";import"./clamp-73f6bef2.js";import"./RichTextEditor-ad15ec59.js";import"./ColorPicker-b49b5d65.js";import"./useTaskDrawerStore-f9735c76.js";import"./LabelsDropdown-fe1f23fe.js";import"./Combobox-a1cc1704.js";import"./PillsInput-69abf6c0.js";import"./Drawer-762f587a.js";import"./MultiSelect-cb840792.js";import"./OptionsDropdown-a64bbc14.js";import"./Select-1d2e372c.js";import"./NumberInput-961cbca2.js";import"./Comments-e9a77121.js";import"./Timer-8d5a8dd2.js";import"./Divider-0f6810b6.js";import"./Breadcrumbs-5118094f.js";import"./SearchInput-3d633920.js";import"./IconSearch-28a5e80d.js";import"./Task-41152e1a.js";import"./TaskCard-9abe7072.js";import"./TaskRow-6579b7f3.js";const L="_viewport_1wdua_2",U={viewport:L};let e=null;const V=()=>{const{project:i,taskGroups:n,groupedTasks:c,openedTask:d}=C().props;e=i;const{groups:a,setGroups:x,reorderGroup:k}=G(),{tasks:l,setTasks:j,addTask:h,reorderTask:g,moveTask:T}=S(),{hasUrlParams:b}=y(),{initProjectWebSocket:v}=z(),{tasksView:p}=P(),u=b();f.useEffect(()=>{x(n),j(c),d&&h(d)},[n,c]),f.useEffect(()=>v(i),[]);const w=({source:o,destination:t})=>{t&&(o.droppableId.includes("tasks")&&t.droppableId.includes("tasks")?o.droppableId===t.droppableId?g(o,t):T(o,t):k(o.index,t.index))};return r.jsxs(r.Fragment,{children:[r.jsx($,{}),can("create task")&&r.jsx(R,{}),r.jsx(_,{}),r.jsxs(s,{columns:12,gutter:50,mt:"xl",className:`${p}-view`,children:[route().params.archived?r.jsx(s.Col,{span:"auto",children:r.jsx(E,{groups:a,tasks:l})}):r.jsx(s.Col,{span:"auto",children:a.length?r.jsx(r.Fragment,{children:r.jsx(M,{onDragEnd:w,children:r.jsx(N,{droppableId:"groups",direction:p==="list"?"vertical":"horizontal",type:"group",children:o=>r.jsx("div",{...o.droppableProps,ref:o.innerRef,children:r.jsxs("div",{className:U.viewport,children:[a.filter(t=>{var m;return!u||u&&((m=l[t.id])==null?void 0:m.length)>0}).map((t,m)=>r.jsx(B,{index:m,group:t,tasks:l[t.id]||[]},t.id)),o.placeholder,!route().params.archived&&can("create task group")&&r.jsxs(I,{leftSection:r.jsx(H,{size:14}),variant:"transparent",size:"sm",mt:14,m:4,radius:"xl",onClick:q,style:{width:"200px"},children:["Add ",p==="list"?"tasks group":"group"]})]})})})})}):r.jsx(D,{title:"No tasks found",subtitle:"or none match your search criteria"})}),p==="list"?r.jsx(s.Col,{span:3,children:r.jsx(F,{})}):r.jsx(W,{})]})]})};V.layout=i=>r.jsx(A,{title:e==null?void 0:e.name,children:i});export{V as default};
