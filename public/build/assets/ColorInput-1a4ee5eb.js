import{b as m,Q as le,R as o,f as ne,e as ce,h as ie,k as pe,i as ue,o as x}from"./app-7bc20a4e.js";import{u as me}from"./use-resolved-styles-api-22476df7.js";import{A as fe}from"./ActionIcon-8588dfb6.js";import{c as z,p as g,i as h,C as de}from"./ColorPicker-24b46372.js";import{C as we}from"./ColorSwatch-67f719b5.js";import{I as _}from"./Input-e73c8c99.js";import{u as ve,I as he}from"./InputBase-7a5da2ab.js";import{P as b}from"./Popover-708222d0.js";import{u as ye}from"./use-uncontrolled-0eb68696.js";function Ce(){const[t,s]=m.useState(!1);le(()=>{s(typeof window<"u"&&"EyeDropper"in window)},[]);const c=m.useCallback((f={})=>t?new window.EyeDropper().open(f):Promise.resolve(void 0),[t]);return{supported:t,open:c}}function Ie({style:t,...s}){return o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",style:{width:"var(--ci-eye-dropper-icon-size)",height:"var(--ci-eye-dropper-icon-size)",...t},viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",...s},o.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),o.createElement("path",{d:"M11 7l6 6"}),o.createElement("path",{d:"M4 16l11.7 -11.7a1 1 0 0 1 1.4 0l2.6 2.6a1 1 0 0 1 0 1.4l-11.7 11.7h-4v-4z"}))}var O={eyeDropperIcon:"m-b077c2bc",colorPreview:"m-c5ccdcab",dropdown:"m-5ece2cd7"};const A={format:"hex",fixOnBlur:!0,withPreview:!0,swatchesPerRow:7,withPicker:!0,popoverProps:{transitionProps:{transition:"fade",duration:0}},withEyeDropper:!0},Se=ue((t,{size:s})=>({eyeDropperIcon:{"--ci-eye-dropper-icon-size":x(s,"ci-eye-dropper-icon-size")},colorPreview:{"--ci-preview-size":x(s,"ci-preview-size")}})),B=ne((t,s)=>{const c=ce("ColorInput",A,t),{classNames:f,styles:y,unstyled:i,disallowInput:N,fixOnBlur:H,popoverProps:M,withPreview:L,withEyeDropper:T,eyeDropperIcon:G,closeOnColorSwatchClick:U,eyeDropperButtonProps:a,value:W,defaultValue:j,onChange:F,onChangeEnd:l,onClick:C,onFocus:I,onBlur:S,inputProps:E,format:p,wrapperProps:Q,readOnly:D,withPicker:R,swatches:P,disabled:V,leftSection:q,rightSection:J,swatchesPerRow:K,...X}=ve("ColorInput",A,t),k=ie({name:"ColorInput",props:c,classes:O,classNames:f,styles:y,unstyled:i,rootSelector:"wrapper",vars:c.vars,varsResolver:Se}),{resolvedClassNames:d,resolvedStyles:w}=me({classNames:f,styles:y,props:c}),[Y,v]=m.useState(!1),[Z,$]=m.useState(""),[r,u]=ye({value:W,defaultValue:j,finalValue:"",onChange:F}),{supported:ee,open:oe}=Ce(),re=o.createElement(fe,{...a,...k("eyeDropperButton",{className:a==null?void 0:a.className,style:a==null?void 0:a.style}),variant:"subtle",color:"gray",size:E.size,unstyled:i,onClick:()=>oe().then(e=>{if(e!=null&&e.sRGBHex){const n=z(p,g(e.sRGBHex));u(n),l==null||l(n)}}).catch(()=>{})},G||o.createElement(Ie,{...k("eyeDropperIcon")})),te=e=>{I==null||I(e),v(!0)},se=e=>{H&&u(Z),S==null||S(e),v(!1)},ae=e=>{C==null||C(e),v(!0)};return m.useEffect(()=>{(h(r)||r.trim()==="")&&$(r)},[r]),pe(()=>{h(r)&&u(z(p,g(r)))},[p]),o.createElement(_.Wrapper,{...Q,classNames:d,styles:w,__staticSelector:"ColorInput"},o.createElement(b,{__staticSelector:"ColorInput",position:"bottom-start",offset:5,...M,opened:Y,classNames:d,styles:w,unstyled:i,withRoles:!1,disabled:D||R===!1&&(!Array.isArray(P)||P.length===0)},o.createElement(b.Target,null,o.createElement(_,{autoComplete:"off",...X,...E,classNames:d,styles:w,disabled:V,ref:s,__staticSelector:"ColorInput",onFocus:te,onBlur:se,onClick:ae,spellCheck:!1,value:r,onChange:e=>{const n=e.currentTarget.value;u(n),h(n)&&(l==null||l(z(p,g(n))))},leftSection:q||(L?o.createElement(we,{color:h(r)?r:"#fff",size:"var(--ci-preview-size)",...k("colorPreview")}):null),readOnly:N||D,pointer:N,unstyled:i,rightSection:J||(T&&!V&&!D&&ee?re:null)})),o.createElement(b.Dropdown,{onMouseDown:e=>e.preventDefault(),className:O.dropdown},o.createElement(de,{__staticSelector:"ColorInput",value:r,onChange:u,onChangeEnd:l,format:p,swatches:P,swatchesPerRow:K,withPicker:R,size:E.size,focusable:!1,unstyled:i,styles:w,classNames:d,onColorSwatchClick:()=>U&&v(!1)}))))});B.classes=he.classes;B.displayName="@mantine/core/ColorInput";export{B as C};
