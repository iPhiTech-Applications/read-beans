import{j as r,B as f,r as l,G as m}from"./app-0842237d.js";import{L as d}from"./Label-91d5cf89.js";import{u as w,C as e}from"./Combobox-1fa9834a.js";import{I as c}from"./Input-da77b9d4.js";import{P as x}from"./PillsInput-ce9d654a.js";import{P as D}from"./Pill-0610b8f5.js";import{a as b}from"./CheckIcon-5dce244a.js";import"./ColorSwatch-3b36ccc9.js";import"./Text-0f25386e.js";import"./Popover-f8e352cc.js";import"./DirectionProvider-8ec7ed91.js";import"./use-floating-auto-update-f3813b40.js";import"./use-uncontrolled-8c49da27.js";import"./create-optional-context-731c9784.js";import"./InputBase-60d93754.js";function T({items:p,selected:n,onChange:a,...u}){const s=w({onDropdownClose:()=>s.resetSelectedOption(),onDropdownOpen:()=>s.updateSelectedOptionIndex("active")}),h=o=>a(n.includes(o)?n.filter(i=>i!==o):[...n,o]),t=o=>a(n.filter(i=>i!==o));return r.jsxs(f,{...u,children:[r.jsx(c.Label,{children:"Labels"}),r.jsxs(e,{store:s,onOptionSubmit:h,withinPortal:!1,disabled:!can("edit task"),children:[r.jsx(e.DropdownTarget,{children:r.jsx(x,{pointer:!0,onClick:()=>s.toggleDropdown(),children:r.jsxs(D.Group,{style:{rowGap:l(3),columnGap:l(12)},children:[n.length>0?n.map(o=>{const i=p.find(j=>j.id===o);return r.jsx(d,{name:i.name,color:i.color,size:11,onRemove:()=>t(i)},i.id)}):r.jsx(c.Placeholder,{children:"Select labels"}),r.jsx(e.EventsTarget,{children:r.jsx(x.Field,{type:"hidden",onBlur:()=>s.closeDropdown(),onKeyDown:o=>{o.key==="Backspace"&&(o.preventDefault(),t(n[n.length-1]))}})})]})})}),r.jsx(e.Dropdown,{children:r.jsx(e.Options,{children:p.map(o=>r.jsx(e.Option,{value:o.id,active:n.includes(o.id),children:r.jsxs(m,{gap:"sm",children:[n.includes(o.id)?r.jsx(b,{size:12}):null,r.jsx(m,{gap:7,children:r.jsx(d,{name:o.name,color:o.color,size:11,onRemove:()=>t(o)})})]})},o.id))})})]})]})}export{T as default};
