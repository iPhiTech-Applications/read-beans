import{x as q,f as D,e as O,u as H,R as p,B as z,s as V,g as F,h as L,b as x,i as X,r as P,t as $,q as G,j as e}from"./app-123ed893.js";import{E as J}from"./EmptyWithIcon-88b1d926.js";import{M as K}from"./MainLayout-d756ba11.js";import{c as U,a as Y}from"./datetime-cf4f36e6.js";import{b as Z,c as ee,a as N}from"./route-002f9c56.js";import{B as te}from"./Breadcrumbs-6a2e8819.js";import{T as B}from"./Title-1ca1d242.js";import{S as se}from"./Select-f4458790.js";import{g as re}from"./get-auto-contrast-value-58024fc4.js";import{A as R}from"./Anchor-f8a41b55.js";import{T as W}from"./Text-7a8e0ced.js";import{T as ie}from"./Tooltip-e94bcd90.js";import{C as oe}from"./Center-5909643e.js";import{c as I}from"./createReactComponent-7e1f628b.js";import{I as ae}from"./IconArchive-96459c6e.js";import{I as le}from"./IconMessage-c104645d.js";import{I as ce}from"./IconClock-1be228eb.js";import{I as ne}from"./IconCheck-32b93f47.js";import{I as me}from"./IconX-842eed75.js";import{I as pe}from"./IconPlus-fea00f2b.js";import"./FlashNotification-b862f807.js";import"./use-disclosure-d59cdd80.js";import"./IconInfoCircle-409ef499.js";import"./IconCircleX-fc7128ba.js";import"./useWebSockets-fcdec77b.js";import"./index-ffe472df.js";import"./useTasksStore-12e71cc3.js";import"./reorder-d676a14f.js";import"./_baseClone-c0d3f5ea.js";import"./use-computed-color-scheme-c3233f71.js";import"./Container-2b0776cc.js";import"./Image-34973361.js";import"./get-style-object-71cabcb5.js";import"./user-6639b4f0.js";import"./Menu-d1d9bfc4.js";import"./use-resolved-styles-api-6ecd5aea.js";import"./Popover-3d4b00cf.js";import"./DirectionProvider-739d2a13.js";import"./use-floating-auto-update-c5e4584a.js";import"./use-uncontrolled-fce7b9fe.js";import"./Avatar-4dc21544.js";import"./upper-first-a5ff10ec.js";import"./IconLayoutList-598e38ee.js";import"./IconUsers-406c3d56.js";import"./ScrollArea-8472fe95.js";import"./ActionIcon-4294e0c7.js";import"./get-sorted-breakpoints-230439b0.js";import"./OptionsDropdown-daf5eb56.js";import"./CheckIcon-5474d37b.js";import"./Combobox-8cde05d4.js";import"./Input-0c5af4bd.js";import"./create-optional-context-f78ae3e4.js";import"./InputBase-ad5899ec.js";const[de,he]=q("Timeline component was not found in tree");var A={root:"m-43657ece",itemTitle:"m-2ebe8099",item:"m-436178ff",itemBullet:"m-8affcee1",itemBody:"m-540e8f41"};const ve={},C=D((r,m)=>{const i=O("TimelineItem",ve,r),{classNames:c,className:o,style:n,styles:t,vars:s,__active:u,__align:k,__lineActive:d,__vars:Q,bullet:M,radius:T,color:h,lineVariant:E,children:f,title:j,mod:b,...y}=i,a=he(),_=H(),l={classNames:c,styles:t};return p.createElement(z,{...a.getStyles("item",{...l,className:o,style:n}),mod:[{"line-active":d,active:u},b],ref:m,__vars:{"--tli-radius":T?V(T):void 0,"--tli-color":h?F(h,_):void 0,"--tli-border-style":E||void 0},...y},p.createElement(z,{...a.getStyles("itemBullet",l),mod:{"with-child":!!M,align:k,active:u}},M),p.createElement("div",{...a.getStyles("itemBody",l)},j&&p.createElement("div",{...a.getStyles("itemTitle",l)},j),p.createElement("div",{...a.getStyles("itemContent",l)},f)))});C.classes=A;C.displayName="@mantine/core/TimelineItem";const ue={active:-1,align:"left",reverseActive:!1},fe=X((r,{bulletSize:m,lineWidth:i,radius:c,color:o,autoContrast:n})=>({root:{"--tl-bullet-size":P(m),"--tl-line-width":P(i),"--tl-radius":c===void 0?void 0:V(c),"--tl-color":o?F(o,r):void 0,"--tl-icon-color":re(n,r)?$({color:o,theme:r}):void 0}})),v=D((r,m)=>{const i=O("Timeline",ue,r),{classNames:c,className:o,style:n,styles:t,unstyled:s,vars:u,children:k,active:d,color:Q,radius:M,bulletSize:T,align:h,lineWidth:E,reverseActive:f,mod:j,...b}=i,y=L({name:"Timeline",classes:A,props:i,className:o,style:n,classNames:c,styles:t,unstyled:s,vars:u,varsResolver:fe}),a=x.Children.toArray(k),_=a.map((l,g)=>{var S,w;return x.cloneElement(l,{unstyled:s,__align:h,__active:((S=l.props)==null?void 0:S.active)||(f?d>=a.length-g-1:d>=g),__lineActive:((w=l.props)==null?void 0:w.lineActive)||(f?d>=a.length-g-1:d-1>=g)})});return p.createElement(de,{value:{getStyles:y}},p.createElement(z,{...y("root"),mod:[{align:h},j],ref:m,...b},_))});v.classes=A;v.displayName="@mantine/core/Timeline";v.Item=C;var je=I("activity","IconActivity",[["path",{d:"M3 12h4l3 8l4 -16l3 8h4",key:"svg-0"}]]),ye=I("calendar-month","IconCalendarMonth",[["path",{d:"M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12z",key:"svg-0"}],["path",{d:"M16 3v4",key:"svg-1"}],["path",{d:"M8 3v4",key:"svg-2"}],["path",{d:"M4 11h16",key:"svg-3"}],["path",{d:"M7 14h.013",key:"svg-4"}],["path",{d:"M10.01 14h.005",key:"svg-5"}],["path",{d:"M13.01 14h.005",key:"svg-6"}],["path",{d:"M16.015 14h.005",key:"svg-7"}],["path",{d:"M13.015 17h.005",key:"svg-8"}],["path",{d:"M7.01 17h.005",key:"svg-9"}],["path",{d:"M10.01 17h.005",key:"svg-10"}]]),ge=I("edit","IconEdit",[["path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1",key:"svg-0"}],["path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z",key:"svg-1"}],["path",{d:"M16 5l3 3",key:"svg-2"}]]),xe=I("paperclip","IconPaperclip",[["path",{d:"M15 7l-6.5 6.5a1.5 1.5 0 0 0 3 3l6.5 -6.5a3 3 0 0 0 -6 -6l-6.5 6.5a4.5 4.5 0 0 0 9 9l6.5 -6.5",key:"svg-0"}]]);const Ie=()=>{var n;let{groupedActivities:r,dropdowns:m}=G().props;const[i,c]=x.useState(((n=route().params)==null?void 0:n.project)||"0");x.useEffect(()=>{i>0?Z({project:i}):ee({exclude:["project"]})},[i]);const o=t=>{if(t.includes("archived"))return e.jsx(ae,{size:18});if(t.includes("comment"))return e.jsx(le,{size:18});if(t.includes("was changed"))return e.jsx(ge,{size:18});if(t.includes("Due date"))return e.jsx(ye,{size:18});if(t.includes("Attachment"))return e.jsx(xe,{size:18});if(t.includes("Estimation was set"))return e.jsx(ce,{size:18});if(t.includes("was completed"))return e.jsx(ne,{size:18});if(t.includes("uncompleted"))return e.jsx(me,{size:18});if(t==="New task"||t==="New project"||t.includes("Assigned user"))return e.jsx(pe,{size:18})};return e.jsxs(e.Fragment,{children:[e.jsxs(te,{fz:14,mb:30,children:[e.jsx("div",{children:"My Work"}),e.jsx("div",{children:"Projects activity"})]}),e.jsx(B,{order:1,mb:20,children:"Projects activity"}),e.jsx(se,{size:"md",placeholder:"Select project",allowDeselect:!1,value:i,onChange:t=>c(t),data:m.projects,mb:35,maw:260}),Object.keys(r).length?Object.keys(r).map(t=>e.jsxs("div",{children:[e.jsx(B,{order:3,mb:"lg",children:t}),e.jsx(v,{active:9999,bulletSize:32,lineWidth:3,mb:"xl",children:r[t].map(s=>e.jsxs(v.Item,{bullet:o(s.title),children:[e.jsxs("div",{children:[e.jsx(R,{href:"#",fz:"md",fw:600,onClick:()=>N("projects.tasks.open",[s.project.id,s.activity_capable.id]),children:s.title}),e.jsx(W,{c:"dimmed",size:"sm",children:s.subtitle}),e.jsx(R,{href:"#",fz:"xs",onClick:()=>N("projects.tasks",[s.project_id]),children:s.project.name})]}),e.jsx(ie,{label:U(s.created_at),openDelay:1e3,withArrow:!0,children:e.jsx(W,{inline:!0,span:!0,size:"xs",mt:4,children:Y(s.created_at)})})]},s.id))})]},t)):e.jsx(oe,{mih:300,children:e.jsx(J,{title:"No activities found",subtitle:"On projects you have access to",icon:je})})]})};Ie.layout=r=>e.jsx(K,{title:"Activity",children:r});export{Ie as default};
