import{v as D,b as B,j as p,w as R,r as x,l as U}from"./app-123ed893.js";import{T as W}from"./TableRowActions-e2ff1294.js";import{m as S}from"./currency-edacadb9.js";import{b as A,t as z}from"./datetime-cf4f36e6.js";import{d as H}from"./file-a40a15db.js";import{a as N}from"./route-002f9c56.js";import K from"./StatusDropdown-3cbbdbad.js";import{T as E}from"./Table-9ea1e6d9.js";import{T as M}from"./Text-7a8e0ced.js";import{A as F}from"./Anchor-f8a41b55.js";import{H as T}from"./HoverCard-718a1d55.js";import{c as P}from"./createReactComponent-7e1f628b.js";import{T as J}from"./Tooltip-e94bcd90.js";import{A as C}from"./ActionIcon-4294e0c7.js";import"./index-136d966c.js";import"./ConfirmModal-4226d1a5.js";import"./IconPencil-56deb085.js";import"./Menu-d1d9bfc4.js";import"./use-resolved-styles-api-6ecd5aea.js";import"./Popover-3d4b00cf.js";import"./DirectionProvider-739d2a13.js";import"./use-floating-auto-update-c5e4584a.js";import"./use-uncontrolled-fce7b9fe.js";import"./IconDots-21feca73.js";import"./IconArchive-96459c6e.js";import"./_baseClone-c0d3f5ea.js";import"./Pill-bab5faf2.js";import"./create-optional-context-f78ae3e4.js";import"./IconPlus-fea00f2b.js";import"./IconCheck-32b93f47.js";import"./ScrollArea-8472fe95.js";import"./use-disclosure-d59cdd80.js";import"./get-style-object-71cabcb5.js";var V=P("file-download","IconFileDownload",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M12 17v-6",key:"svg-2"}],["path",{d:"M9.5 14.5l2.5 2.5l2.5 -2.5",key:"svg-3"}]]),Z=P("notes-off","IconNotesOff",[["path",{d:"M7 3h10a2 2 0 0 1 2 2v10m0 4a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-14",key:"svg-0"}],["path",{d:"M11 7h4",key:"svg-1"}],["path",{d:"M9 11h2",key:"svg-2"}],["path",{d:"M9 15h4",key:"svg-3"}],["path",{d:"M3 3l18 18",key:"svg-4"}]]),G=P("notes","IconNotes",[["path",{d:"M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M9 7l6 0",key:"svg-1"}],["path",{d:"M9 11l6 0",key:"svg-2"}],["path",{d:"M9 15l4 0",key:"svg-3"}]]),X=P("printer","IconPrinter",[["path",{d:"M17 17h2a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2h-14a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h2",key:"svg-0"}],["path",{d:"M17 9v-4a2 2 0 0 0 -2 -2h-6a2 2 0 0 0 -2 2v4",key:"svg-1"}],["path",{d:"M7 13m0 2a2 2 0 0 1 2 -2h6a2 2 0 0 1 2 2v4a2 2 0 0 1 -2 2h-6a2 2 0 0 1 -2 -2z",key:"svg-2"}]]),I={exports:{}};(function(v,O){(function(c,n){v.exports=n()})(window,function(){return function(b){var c={};function n(o){if(c[o])return c[o].exports;var a=c[o]={i:o,l:!1,exports:{}};return b[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=b,n.c=c,n.d=function(o,a,s){n.o(o,a)||Object.defineProperty(o,a,{enumerable:!0,get:s})},n.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},n.t=function(o,a){if(a&1&&(o=n(o)),a&8||a&4&&typeof o=="object"&&o&&o.__esModule)return o;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:o}),a&2&&typeof o!="string")for(var m in o)n.d(s,m,(function(i){return o[i]}).bind(null,m));return s},n.n=function(o){var a=o&&o.__esModule?function(){return o.default}:function(){return o};return n.d(a,"a",a),a},n.o=function(o,a){return Object.prototype.hasOwnProperty.call(o,a)},n.p="",n(n.s=0)}({"./src/index.js":function(b,c,n){n.r(c),n("./src/sass/index.scss");var o=n("./src/js/init.js"),a=o.default.init;typeof window<"u"&&(window.printJS=a),c.default=a},"./src/js/browser.js":function(b,c,n){n.r(c);var o={isFirefox:function(){return typeof InstallTrigger<"u"},isIE:function(){return navigator.userAgent.indexOf("MSIE")!==-1||!!document.documentMode},isEdge:function(){return!o.isIE()&&!!window.StyleMedia},isChrome:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window;return!!s.chrome},isSafari:function(){return Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||navigator.userAgent.toLowerCase().indexOf("safari")!==-1},isIOSChrome:function(){return navigator.userAgent.toLowerCase().indexOf("crios")!==-1}};c.default=o},"./src/js/functions.js":function(b,c,n){n.r(c),n.d(c,"addWrapper",function(){return m}),n.d(c,"capitalizePrint",function(){return i}),n.d(c,"collectStyles",function(){return l}),n.d(c,"addHeader",function(){return e}),n.d(c,"cleanUp",function(){return u}),n.d(c,"isRawHTML",function(){return h});var o=n("./src/js/modal.js"),a=n("./src/js/browser.js");function s(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?s=function(f){return typeof f}:s=function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},s(t)}function m(t,d){var f="font-family:"+d.font+" !important; font-size: "+d.font_size+" !important; width:100%;";return'<div style="'+f+'">'+t+"</div>"}function i(t){return t.charAt(0).toUpperCase()+t.slice(1)}function l(t,d){for(var f=document.defaultView||window,g="",y=f.getComputedStyle(t,""),j=0;j<y.length;j++)(d.targetStyles.indexOf("*")!==-1||d.targetStyle.indexOf(y[j])!==-1||r(d.targetStyles,y[j]))&&y.getPropertyValue(y[j])&&(g+=y[j]+":"+y.getPropertyValue(y[j])+";");return g+="max-width: "+d.maxWidth+"px !important; font-size: "+d.font_size+" !important;",g}function r(t,d){for(var f=0;f<t.length;f++)if(s(d)==="object"&&d.indexOf(t[f])!==-1)return!0;return!1}function e(t,d){var f=document.createElement("div");if(h(d.header))f.innerHTML=d.header;else{var g=document.createElement("h1"),y=document.createTextNode(d.header);g.appendChild(y),g.setAttribute("style",d.headerStyle),f.appendChild(g)}t.insertBefore(f,t.childNodes[0])}function u(t){t.showModal&&o.default.close(),t.onLoadingEnd&&t.onLoadingEnd(),(t.showModal||t.onLoadingStart)&&window.URL.revokeObjectURL(t.printable);var d="mouseover";(a.default.isChrome()||a.default.isFirefox())&&(d="focus");var f=function g(){window.removeEventListener(d,g),t.onPrintDialogClose();var y=document.getElementById(t.frameId);y&&y.remove()};window.addEventListener(d,f)}function h(t){var d=new RegExp("<([A-Za-z][A-Za-z0-9]*)\\b[^>]*>(.*?)</\\1>");return d.test(t)}},"./src/js/html.js":function(b,c,n){n.r(c);var o=n("./src/js/functions.js"),a=n("./src/js/print.js");function s(l){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?s=function(e){return typeof e}:s=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(l)}c.default={print:function(r,e){var u=i(r.printable)?r.printable:document.getElementById(r.printable);if(!u){window.console.error("Invalid HTML element id: "+r.printable);return}r.printableElement=m(u,r),r.header&&Object(o.addHeader)(r.printableElement,r),a.default.send(r,e)}};function m(l,r){for(var e=l.cloneNode(),u=Array.prototype.slice.call(l.childNodes),h=0;h<u.length;h++)if(r.ignoreElements.indexOf(u[h].id)===-1){var t=m(u[h],r);e.appendChild(t)}switch(r.scanStyles&&l.nodeType===1&&e.setAttribute("style",Object(o.collectStyles)(l,r)),l.tagName){case"SELECT":e.value=l.value;break;case"CANVAS":e.getContext("2d").drawImage(l,0,0);break}return e}function i(l){return s(l)==="object"&&l&&(l instanceof HTMLElement||l.nodeType===1)}},"./src/js/image.js":function(b,c,n){n.r(c);var o=n("./src/js/functions.js"),a=n("./src/js/print.js"),s=n("./src/js/browser.js");c.default={print:function(i,l){i.printable.constructor!==Array&&(i.printable=[i.printable]),i.printableElement=document.createElement("div"),i.printable.forEach(function(r){var e=document.createElement("img");if(e.setAttribute("style",i.imageStyle),e.src=r,s.default.isFirefox()){var u=e.src;e.src=u}var h=document.createElement("div");h.appendChild(e),i.printableElement.appendChild(h)}),i.header&&Object(o.addHeader)(i.printableElement,i),a.default.send(i,l)}}},"./src/js/init.js":function(b,c,n){n.r(c);var o=n("./src/js/browser.js"),a=n("./src/js/modal.js"),s=n("./src/js/pdf.js"),m=n("./src/js/html.js"),i=n("./src/js/raw-html.js"),l=n("./src/js/image.js"),r=n("./src/js/json.js");function e(h){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(d){return typeof d}:e=function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},e(h)}var u=["pdf","html","image","json","raw-html"];c.default={init:function(){var t={printable:null,fallbackPrintable:null,type:"pdf",header:null,headerStyle:"font-weight: 300;",maxWidth:800,properties:null,gridHeaderStyle:"font-weight: bold; padding: 5px; border: 1px solid #dddddd;",gridStyle:"border: 1px solid lightgray; margin-bottom: -1px;",showModal:!1,onError:function(L){throw L},onLoadingStart:null,onLoadingEnd:null,onPrintDialogClose:function(){},onIncompatibleBrowser:function(){},modalMessage:"Retrieving Document...",frameId:"printJS",printableElement:null,documentTitle:"Document",targetStyle:["clear","display","width","min-width","height","min-height","max-height"],targetStyles:["border","box","break","text-decoration"],ignoreElements:[],repeatTableHeader:!0,css:null,style:null,scanStyles:!0,base64:!1,onPdfOpen:null,font:"TimesNewRoman",font_size:"12pt",honorMarginPadding:!0,honorColor:!1,imageStyle:"max-width: 100%;"},d=arguments[0];if(d===void 0)throw new Error("printJS expects at least 1 attribute.");switch(e(d)){case"string":t.printable=encodeURI(d),t.fallbackPrintable=t.printable,t.type=arguments[1]||t.type;break;case"object":t.printable=d.printable,t.fallbackPrintable=typeof d.fallbackPrintable<"u"?d.fallbackPrintable:t.printable,t.fallbackPrintable=t.base64?"data:application/pdf;base64,".concat(t.fallbackPrintable):t.fallbackPrintable;for(var f in t)f==="printable"||f==="fallbackPrintable"||(t[f]=typeof d[f]<"u"?d[f]:t[f]);break;default:throw new Error('Unexpected argument type! Expected "string" or "object", got '+e(d))}if(!t.printable)throw new Error("Missing printable information.");if(!t.type||typeof t.type!="string"||u.indexOf(t.type.toLowerCase())===-1)throw new Error("Invalid print type. Available types are: pdf, html, image and json.");t.showModal&&a.default.show(t),t.onLoadingStart&&t.onLoadingStart();var g=document.getElementById(t.frameId);g&&g.parentNode.removeChild(g);var y=document.createElement("iframe");switch(o.default.isFirefox()?y.setAttribute("style","width: 1px; height: 100px; position: fixed; left: 0; top: 0; opacity: 0; border-width: 0; margin: 0; padding: 0"):y.setAttribute("style","visibility: hidden; height: 0; width: 0; position: absolute; border: 0"),y.setAttribute("id",t.frameId),t.type!=="pdf"&&(y.srcdoc="<html><head><title>"+t.documentTitle+"</title>",t.css&&(Array.isArray(t.css)||(t.css=[t.css]),t.css.forEach(function(w){y.srcdoc+='<link rel="stylesheet" href="'+w+'">'})),y.srcdoc+="</head><body></body></html>"),t.type){case"pdf":if(o.default.isIE())try{console.info("Print.js doesn't support PDF printing in Internet Explorer.");var j=window.open(t.fallbackPrintable,"_blank");j.focus(),t.onIncompatibleBrowser()}catch(w){t.onError(w)}finally{t.showModal&&a.default.close(),t.onLoadingEnd&&t.onLoadingEnd()}else s.default.print(t,y);break;case"image":l.default.print(t,y);break;case"html":m.default.print(t,y);break;case"raw-html":i.default.print(t,y);break;case"json":r.default.print(t,y);break}}}},"./src/js/json.js":function(b,c,n){n.r(c);var o=n("./src/js/functions.js"),a=n("./src/js/print.js");function s(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?s=function(r){return typeof r}:s=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},s(i)}c.default={print:function(l,r){if(s(l.printable)!=="object")throw new Error("Invalid javascript data object (JSON).");if(typeof l.repeatTableHeader!="boolean")throw new Error("Invalid value for repeatTableHeader attribute (JSON).");if(!l.properties||!Array.isArray(l.properties))throw new Error("Invalid properties array for your JSON data.");l.properties=l.properties.map(function(e){return{field:s(e)==="object"?e.field:e,displayName:s(e)==="object"?e.displayName:e,columnSize:s(e)==="object"&&e.columnSize?e.columnSize+";":100/l.properties.length+"%;"}}),l.printableElement=document.createElement("div"),l.header&&Object(o.addHeader)(l.printableElement,l),l.printableElement.innerHTML+=m(l),a.default.send(l,r)}};function m(i){var l=i.printable,r=i.properties,e='<table style="border-collapse: collapse; width: 100%;">';i.repeatTableHeader&&(e+="<thead>"),e+="<tr>";for(var u=0;u<r.length;u++)e+='<th style="width:'+r[u].columnSize+";"+i.gridHeaderStyle+'">'+Object(o.capitalizePrint)(r[u].displayName)+"</th>";e+="</tr>",i.repeatTableHeader&&(e+="</thead>"),e+="<tbody>";for(var h=0;h<l.length;h++){e+="<tr>";for(var t=0;t<r.length;t++){var d=l[h],f=r[t].field.split(".");if(f.length>1)for(var g=0;g<f.length;g++)d=d[f[g]];else d=d[r[t].field];e+='<td style="width:'+r[t].columnSize+i.gridStyle+'">'+d+"</td>"}e+="</tr>"}return e+="</tbody></table>",e}},"./src/js/modal.js":function(b,c,n){n.r(c);var o={show:function(s){var m="font-family:sans-serif; display:table; text-align:center; font-weight:300; font-size:30px; left:0; top:0;position:fixed; z-index: 9990;color: #0460B5; width: 100%; height: 100%; background-color:rgba(255,255,255,.9);transition: opacity .3s ease;",i=document.createElement("div");i.setAttribute("style",m),i.setAttribute("id","printJS-Modal");var l=document.createElement("div");l.setAttribute("style","display:table-cell; vertical-align:middle; padding-bottom:100px;");var r=document.createElement("div");r.setAttribute("class","printClose"),r.setAttribute("id","printClose"),l.appendChild(r);var e=document.createElement("span");e.setAttribute("class","printSpinner"),l.appendChild(e);var u=document.createTextNode(s.modalMessage);l.appendChild(u),i.appendChild(l),document.getElementsByTagName("body")[0].appendChild(i),document.getElementById("printClose").addEventListener("click",function(){o.close()})},close:function(){var s=document.getElementById("printJS-Modal");s&&s.parentNode.removeChild(s)}};c.default=o},"./src/js/pdf.js":function(b,c,n){n.r(c);var o=n("./src/js/print.js"),a=n("./src/js/functions.js");c.default={print:function(i,l){if(i.base64){var r=Uint8Array.from(atob(i.printable),function(u){return u.charCodeAt(0)});s(i,l,r);return}i.printable=/^(blob|http|\/\/)/i.test(i.printable)?i.printable:window.location.origin+(i.printable.charAt(0)!=="/"?"/"+i.printable:i.printable);var e=new window.XMLHttpRequest;e.responseType="arraybuffer",e.addEventListener("error",function(){Object(a.cleanUp)(i),i.onError(e.statusText,e)}),e.addEventListener("load",function(){if([200,201].indexOf(e.status)===-1){Object(a.cleanUp)(i),i.onError(e.statusText,e);return}s(i,l,e.response)}),e.open("GET",i.printable,!0),e.send()}};function s(m,i,l){var r=new window.Blob([l],{type:"application/pdf"});r=window.URL.createObjectURL(r),i.setAttribute("src",r),o.default.send(m,i)}},"./src/js/print.js":function(b,c,n){n.r(c);var o=n("./src/js/browser.js"),a=n("./src/js/functions.js"),s={send:function(e,u){document.getElementsByTagName("body")[0].appendChild(u);var h=document.getElementById(e.frameId);h.onload=function(){if(e.type==="pdf"){o.default.isFirefox()?setTimeout(function(){return m(h,e)},1e3):m(h,e);return}var t=h.contentWindow||h.contentDocument;if(t.document&&(t=t.document),t.body.appendChild(e.printableElement),e.type!=="pdf"&&e.style){var d=document.createElement("style");d.innerHTML=e.style,t.head.appendChild(d)}var f=t.getElementsByTagName("img");f.length>0?i(Array.from(f)).then(function(){return m(h,e)}):m(h,e)}}};function m(r,e){try{if(r.focus(),o.default.isEdge()||o.default.isIE())try{r.contentWindow.document.execCommand("print",!1,null)}catch{r.contentWindow.print()}else r.contentWindow.print()}catch(u){e.onError(u)}finally{o.default.isFirefox()&&(r.style.visibility="hidden",r.style.left="-1px"),Object(a.cleanUp)(e)}}function i(r){var e=r.map(function(u){if(u.src&&u.src!==window.location.href)return l(u)});return Promise.all(e)}function l(r){return new Promise(function(e){var u=function h(){!r||typeof r.naturalWidth>"u"||r.naturalWidth===0||!r.complete?setTimeout(h,500):e()};u()})}c.default=s},"./src/js/raw-html.js":function(b,c,n){n.r(c);var o=n("./src/js/print.js");c.default={print:function(s,m){s.printableElement=document.createElement("div"),s.printableElement.setAttribute("style","width:100%"),s.printableElement.innerHTML=s.printable,o.default.send(s,m)}}},"./src/sass/index.scss":function(b,c,n){},0:function(b,c,n){b.exports=n("./src/index.js")}}).default})})(I);var Q=I.exports;const Y=D(Q);function At({item:v}){const[O,b]=B.useState(!1),c=()=>{U.get(route("invoices.download",v.id),{responseType:"blob"}).then(({data:o})=>{H(o,v.filename.slice(5),"application/pdf")})},n=()=>{Y({printable:route("invoices.pdf",v.id),type:"pdf",onLoadingStart:()=>b(!0),onLoadingEnd:()=>setTimeout(()=>b(!1),500)})};return p.jsxs(E.Tr,{children:[p.jsx(E.Td,{children:p.jsx(M,{fz:"md",fw:700,children:v.number})}),p.jsx(E.Td,{children:p.jsx(M,{fz:"sm",children:p.jsx(K,{invoiceId:v.id,status:v.status})})}),p.jsxs(E.Td,{children:[p.jsx(F,{onClick:()=>N("clients.companies.edit",v.client_company.id),children:p.jsx(M,{fz:"md",fw:600,children:v.client_company.name})}),p.jsx(M,{fz:"xs",c:"dimmed",children:"Client company"})]}),p.jsx(E.Td,{children:v.note?p.jsxs(T,{width:280,shadow:"md",withArrow:!0,children:[p.jsx(T.Target,{children:p.jsx(G,{})}),p.jsx(T.Dropdown,{children:p.jsx(M,{size:"sm",children:v.note})})]}):p.jsx(Z,{opacity:.3})}),p.jsx(E.Td,{children:p.jsx(M,{fz:"sm",children:S(v.amount,v.client_company.currency.code)})}),p.jsx(E.Td,{children:p.jsx(M,{fz:"sm",children:S(v.amount_with_tax,v.client_company.currency.code)})}),p.jsx(E.Td,{children:p.jsx(M,{fz:"sm",c:R().isAfter(v.due_date)&&v.status!=="paid"?"red":"inherit",children:A(v.due_date)})}),p.jsx(E.Td,{children:p.jsx(J,{label:z(v.created_at),openDelay:500,withArrow:!0,children:p.jsx(M,{fz:"sm",component:"span",inline:!0,children:A(v.created_at)})})}),(can("edit invoice")||can("archive invoice")||can("restore invoice"))&&p.jsx(E.Td,{children:p.jsxs(W,{item:v,editRoute:"invoices.edit",editPermission:"edit invoice",archivePermission:"archive invoice",restorePermission:"restore invoice",archive:{route:"invoices.destroy",title:"Archive invoice",content:"Are you sure you want to archive this invoice?",confirmLabel:"Archive"},restore:{route:"invoices.restore",title:"Restore invoice",content:"Are you sure you want to restore this invoice?",confirmLabel:"Restore"},children:[can("download invoice")&&p.jsx(C,{variant:"subtle",color:"blue",onClick:()=>c(),children:p.jsx(V,{style:{width:x(16),height:x(16)},stroke:1.5})}),can("print invoice")&&p.jsx(C,{variant:"subtle",color:"blue",loading:O,onClick:()=>n(),children:p.jsx(X,{style:{width:x(16),height:x(16)},stroke:1.5})})]})})]},v.id)}export{At as default};
